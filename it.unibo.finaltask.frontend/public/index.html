<html lang="en" class="">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
      <title>Smartcleaner</title>
      <script src="https://use.fontawesome.com/releases/v5.12.1/js/all.js"></script>
      <style>div,fieldset,input,select{padding:5px;font-size:1em;}fieldset{background:#f2f2f2;}p{margin:0.5em 0;}input{width:100%;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;background:#ffffff;color:#000000;}input[type=checkbox],input[type=radio]{width:1em;margin-right:6px;vertical-align:-1px;}select{width:100%;background:#ffffff;color:#000000;}textarea{resize:none;width:98%;height:318px;padding:5px;overflow:auto;background:#ffffff;color:#000000;}body{text-align:center;font-family:verdana,sans-serif;background:#ffffff;}td{padding:0px;}button{border:0;border-radius:0.3rem;background:#1fa3ec;color:#ffffff;line-height:2.4rem;font-size:1.2rem;width:100%;-webkit-transition-duration:0.4s;transition-duration:0.4s;cursor:pointer;}button:hover{background:#0e70a4;}.bred{background:#d43535;}.bred:hover{background:#931f1f;}.bgrn{background:#47c266;}.bgrn:hover{background:#5aaf6f;}a{text-decoration:none;}.p{float:left;text-align:left;}.q{float:right;text-align:right;}</style>
      <link rel="stylesheet" type="text/css" href="style.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
     
   </head>
   <body>
      <div id="mainContainer">
         <div style="text-align:center;">
            <h3>Smartcleaner</h3>
         </div>
         <div id="mapSection">
            <div style="display: flex; flex-direction: row;">
               <h4 style="text-align:center; margin:0">Map</h4> &nbsp  &nbsp
               <label class="switch">
                  <input type="checkbox" id="mapCheckbox">
                  <span class="slider round"></span>
               </label>
            </div>
            <div id="mapContainer" style="display:none"></div>
            <canvas id="myCanvas"></canvas>
         </div>
         <div style="text-align:center;">
            <h4>Detector</h4>
            <p id="detectorspace"> </p>
            <p id="currenttask"> </p>
            <p id="waitingsupervisor"> </p>
         </div>
         <div id="buttonContainer">
            <button name="" id="explore">Explore</button>
            <button name="" id="suspend">Suspend</button>
            <button name="" id="terminate">Terminate</button>
            <button name="" id="continue">Continue</button>
         </div>
         <div>
            <h4>PlasticBox</h4>
            <p id="plasticboxspace"> </p>
         </div>
         <div>
            <button name="" id="empty">Empty</button>
         </div>
			<div style="display: flex; flex-direction: row; justify-content:center;">
               <h4 style="text-align:center; margin:0">Advanced</h4> &nbsp  &nbsp
               <label class="switch">
                  <input type="checkbox" id="advancedCheckbox">
                  <span class="slider round"></span>
               </label>
            </div>
			<div id="advanceddiv">
				 <div>
					<h4>Last Obstacle</h4>
					<img id="lastobstacleimg" src="data:image/png;base64,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"> </img>
				 </div>
				 <div id="buttonContainer">
					<h4>Is it a bottle?</h4>
					<button name="" id="isbottle" style="background:#28a745">Yes</button>
					<button name="" id="notbottle" class="button bred">No</button>
				 </div>
			</div>
         <div style="text-align:right;font-size:11px;">
            <hr>
            <a href="#" target="_blank" style="color:#aaa;">Smartcleaner by </a>
         </div>
      </div>
   </body>

   <script>
		$("#advanceddiv").toggle()
   
      var server = io()
      drawing = new Image();
      drawing.src = "https://cdn.iconscout.com/icon/premium/png-256-thumb/vacuum-1671324-1418626.png"
      
      $("#mapCheckbox").change(function() { 
         $("#myCanvas").toggle()
         $("#mapContainer").toggle()
      });
	  
      $("#advancedCheckbox").change(function() { 
         $("#advanceddiv").toggle()
      });
   
      server.on('update', function (payload) {
         //{ resource: resource, value: value}
         switch (payload.resource) {
            case 'detector/RoomMap':
               $("#map").html(payload.value.replace(/\n/g, "<br />"))
               let map = payload.value
               console.log(map)
               drawOnFlex(map)
               drawOnCanvas(map)
               break
            case 'detector/SpaceAvailable':
               $("#detectorspace").html("Space Available: " + payload.value);
               break
            case 'detector/currentTask':
               $("#currenttask").html("Robot is: " + payload.value);
               break
            case 'detector/waitingForSupervisor':
               if (payload.value === "true") {
                  $("#waitingsupervisor").html("Robot is waiting for supervisor");
                  $("#continue").show();
                  $("#explore").hide();
                  $("#suspend").hide();
                  $("#terminate").hide();
               } else {
                  $("#waitingsupervisor").html("");
                  $("#continue").hide();
                  $("#explore").show();
                  $("#suspend").show();
                  $("#terminate").show();
               }
               break
            case 'plasticbox/SpaceAvailable':
               $("#plasticboxspace").html("Space Available: " + payload.value);
               break
         }
      });
	  
	  server.on('obstacle', payload => {
		$("#lastobstacleimg").attr('src', payload.url);
	  });


      $("#explore").click(function () {
         console.log("explore");
         server.emit('command', { name: 'explore' })
      });
      $("#suspend").click(function () {
         console.log("suspend");
         server.emit('command', { name: 'suspend' })
      });
      $("#terminate").click(function () {
         console.log("terminate");
         server.emit('command', { name: 'terminate' })
      });
      $("#continue").click(function () {
         console.log("continue");
         server.emit('command', { name: 'continue' })
      });
      $("#empty").click(function () {
         console.log("empty");
         server.emit('command', { name: 'empty' })
      });
	  
	  $("#isbottle").click(function () {
         console.log("isbottle");
         server.emit('command', { name: 'isbottle' })
      });
	  
	  $("#notbottle").click(function () {
         console.log("notbottle");
         server.emit('command', { name: 'notbottle' })
      });
   
      function drawOnCanvas(mapString) {
         var canvas = document.getElementById('myCanvas');
         let squareDim = canvas.height / (Math.max(1,Math.min(25, mapString.trim().split('\n').length)));
         if (canvas.getContext) {
            var ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
            ctx.fillStyle = "#0e70a4";
            ctx.strokeStyle = "#1fa3ec";
            let c = 0;
            let r = 0;
            mapString = mapString.trim()
               for (var i = 0; i <= mapString.length; i++) {
                  if (mapString.charAt(i) === '\n') {
                     c++;
                     r = 0;
                  } else if(mapString.charAt(i) === 'X' || mapString.charAt(i) === '1' || mapString.charAt(i) === '0' || mapString.charAt(i) === 'r') {
                     if (mapString.charAt(i) === '1') {
                        ctx.strokeRect(squareDim * r, squareDim * c, squareDim, squareDim);
                     } else if (mapString.charAt(i) === '0') {
                        ctx.strokeRect(squareDim * r, squareDim * c, squareDim, squareDim);
                        ctx.moveTo(squareDim * r, squareDim * c);
                        ctx.lineTo(squareDim * r + squareDim, squareDim * c + squareDim);
                        ctx.moveTo(squareDim * r, squareDim * c + squareDim);
                        ctx.lineTo(squareDim * r + squareDim, squareDim * c);
                        ctx.stroke();
                     } else if(mapString.charAt(i) === 'X'){
                        ctx.fillRect(squareDim * r, squareDim * c, squareDim, squareDim);
                     } else {
                        ctx.drawImage(drawing, squareDim * r, squareDim * c, squareDim, squareDim)
                     }
                     r++;
                  }
            }
         }
      }

      function drawOnFlex(map) {
            map = Array.from(map)
            
            var newMap = "<div class='mapRow'>"
            
            for(var i = 0; i < map.length; i++ ) {
               if(map[i] === 'X') {
                  newMap += '<div class="item"><i class="fas fa-2x fa-times"></i></div>'
               } else if (map[i] === '1') {
                  newMap += '<div class="item"><i class="far fa-2x fa-circle"></i></div>'
               } else if (map[i] === '0') {
                  newMap += '<div class="item"><i class="fas fa-2x fa-question"></i></div>'
               } else if (map[i] === 'r') {
                  newMap += '<div class="item"><i class="fab fa-2x fa-reddit-alien"></i></div>'
               } else if (map[i] === ',' || map[i] === '|' || map[i] === ' ') {
                  //ignore
               } else if (map[i] === '\n') { 
                  if(i == map.length)
                     newMap += '</div>'
                  else 
                     newMap += '</div><div class="mapRow">'
               } else {
                  newMap += '<div class="item"><i class="far fa-2x fa-circle"></i></div>'
               }
            }
            $("#mapContainer").html(newMap);
         }
   </script>
</html>